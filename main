#include <iostream>
#include <string>
#include <vector>

void printHelp() {
    std::cout << "Медиа-каталог - управление коллекцией книг/фильмов\n\n";
    std::cout << "Использование:\n";
    std::cout << "  ./media_catalog --input FILE.json [команды]\n\n";
    std::cout << "Команды:\n";
    std::cout << "  --find TEXT          Поиск по названию\n";
    std::cout << "  --author TEXT        Поиск по автору\n";
    std::cout << "  --tag TAG            Поиск по тегу\n";
    std::cout << "  --top N              Топ-N по рейтингу\n";
    std::cout << "  --duplicates         Поиск дубликатов\n";
    std::cout << "  --output FILE.json   Сохранить результаты\n";
    std::cout << "  --help               Показать эту справку\n";
}

int main(int argc, char* argv[]) {
    if (argc < 2) {
        printHelp();
        return 1;
    }

    std::string inputFile;
    std::string outputFile;
    std::string searchQuery;
    int topN = 0;
    bool findDuplicates = false;

    for (int i = 1; i < argc; ++i) {
        std::string arg = argv[i];

        if (arg == "--input" && i + 1 < argc) {
            inputFile = argv[++i];
        }
        else if (arg == "--output" && i + 1 < argc) {
            outputFile = argv[++i];
        }
        else if (arg == "--find" && i + 1 < argc) {
            searchQuery = argv[++i];
        }
        else if (arg == "--top" && i + 1 < argc) {
            topN = std::stoi(argv[++i]);
        }
        else if (arg == "--duplicates") {
            findDuplicates = true;
        }
        else if (arg == "--help") {
            printHelp();
            return 0;
        }
    }

    MediaCatalog catalog;

    if (!catalog.loadFromJSON(inputFile)) {
        std::cerr << "Ошибка загрузки файла: " << inputFile << std::endl;
        return 1;
    }

    return 0;
}
