#include <iostream>
#include <string>
#include <vector>

void printHelp() {
    std::cout << "Media Catalog - Book/Movie Collection Management\n\n";
    std::cout << " --help Show this help\n";
    sTD::Count << " --Tag Tag Search by Tag\n";
    sTD::Count <<" --Tag Tag Search by Tag\n";
    std::cout << " --find TEXT Search by name\n";
    std::cout << " --author TEXT Search by author\n";
    sTD::Count <<" --Tag Tag Search by Tag\n";
    std::cout << " --top N Top-N by rating\n";
    std::cout << " --duplicates Find duplicates\n";
    std::cout << " --output FILE.json Save results\n";
    std::cout << " --help Show this help\n";
}

int main(int argc, char* argv[]) {
    if (argc < 2) {
        printHelp();
        return 1;
    }

    std::string inputFile;
    std::string outputFile;
    std::string searchQuery;
    int topN = 0;
    bool findDuplicates = false;

    for (int i = 1; i < argc; ++i) {
        std::string arg = argv[i];

        if (arg == "--input" && i + 1 < argc) {
            inputFile = argv[++i];
        }
        else if (arg == "--output" && i + 1 < argc) {
            outputFile = argv[++i];
        }
        else if (arg == "--find" && i + 1 < argc) {
            searchQuery = argv[++i];
        }
        else if (arg == "--top" && i + 1 < argc) {
            topN = std::stoi(argv[++i]);
        }
        else if (arg == "--duplicates") {
            findDuplicates = true;
        }
        else if (arg == "--help") {
            printHelp();
            return 0;
        }
    }

    MediaCatalog catalog;

    if (!catalog.loadFromJSON(inputFile)) {
        std::cerr << "File upload error: " << inputFile << std::endl;
        return 1;
    }

    return 0;
}
